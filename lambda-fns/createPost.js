"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const AWS = require('aws-sdk');
const docClient = new AWS.DynamoDB.DocumentClient();
const uuid_1 = require("uuid");
async function createPost(post, username) {
    if (!post.id) {
        post.id = uuid_1.v4();
    }
    const postData = { ...post, owner: username };
    const params = {
        TableName: process.env.POST_TABLE,
        Item: postData
    };
    try {
        await docClient.put(params).promise();
        return postData;
    }
    catch (err) {
        console.log('DynamoDB error: ', err);
        return null;
    }
}
exports.default = createPost;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlUG9zdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNyZWF0ZVBvc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUE7QUFDOUIsTUFBTSxTQUFTLEdBQUcsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFBO0FBRW5ELCtCQUFpQztBQUVqQyxLQUFLLFVBQVUsVUFBVSxDQUFDLElBQVUsRUFBRSxRQUFnQjtJQUNwRCxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNaLElBQUksQ0FBQyxFQUFFLEdBQUcsU0FBSSxFQUFFLENBQUE7S0FDakI7SUFDRCxNQUFNLFFBQVEsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQTtJQUM3QyxNQUFNLE1BQU0sR0FBRztRQUNiLFNBQVMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVU7UUFDakMsSUFBSSxFQUFFLFFBQVE7S0FDZixDQUFBO0lBQ0QsSUFBSTtRQUNGLE1BQU0sU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNyQyxPQUFPLFFBQVEsQ0FBQTtLQUNoQjtJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUNwQyxPQUFPLElBQUksQ0FBQTtLQUNaO0FBQ0gsQ0FBQztBQUVELGtCQUFlLFVBQVUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFXUyA9IHJlcXVpcmUoJ2F3cy1zZGsnKVxuY29uc3QgZG9jQ2xpZW50ID0gbmV3IEFXUy5EeW5hbW9EQi5Eb2N1bWVudENsaWVudCgpXG5pbXBvcnQgUG9zdCBmcm9tICcuL1Bvc3QnXG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCdcblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUG9zdChwb3N0OiBQb3N0LCB1c2VybmFtZTogc3RyaW5nKSB7XG4gIGlmICghcG9zdC5pZCkge1xuICAgIHBvc3QuaWQgPSB1dWlkKClcbiAgfVxuICBjb25zdCBwb3N0RGF0YSA9IHsgLi4ucG9zdCwgb3duZXI6IHVzZXJuYW1lIH1cbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIFRhYmxlTmFtZTogcHJvY2Vzcy5lbnYuUE9TVF9UQUJMRSxcbiAgICBJdGVtOiBwb3N0RGF0YVxuICB9XG4gIHRyeSB7XG4gICAgYXdhaXQgZG9jQ2xpZW50LnB1dChwYXJhbXMpLnByb21pc2UoKVxuICAgIHJldHVybiBwb3N0RGF0YVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnRHluYW1vREIgZXJyb3I6ICcsIGVycilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVBvc3QiXX0=